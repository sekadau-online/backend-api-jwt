# Example .env file for development and testing
# DO NOT store real secrets here. Replace values with your local/test credentials.

# Server binding
APP_HOST=127.0.0.1
APP_PORT=3002

# Database (MySQL) â€” replace user/password/host/port/dbname as appropriate
# Example: mysql://root:password@127.0.0.1:3306/db_backend_api_jwt
DB_HOST=127.0.0.1
DB_USER=root
DB_PASS=your_password_here
DATABASE_URL=mysql://${DB_USER}:${DB_PASS}@${DB_HOST}:3306/db_backend_api_jwt

# JWT secret used for signing tokens (keep long & random in production)
JWT_SECRET=change_me_for_tests_or_dev

# CORS configuration
# ENABLE_CORS=true will enable permissive CORS (allow any origin).
# You can alternatively set CORS_ALLOWED_ORIGINS to a comma-separated list of origins or to a single "*" value to allow any origin.
# Examples:
#   CORS_ALLOWED_ORIGINS=*            # permissive (allow any origin)
#   CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
ENABLE_CORS=false
CORS_ALLOWED_ORIGINS=*

# CI/test convenience values (used only by your CI workflow if you set them in repository secrets)
# NOTE: DO NOT commit real secrets here - add them to GitHub Secrets instead.
MYSQL_ROOT_PASSWORD=rusttest

# Optional: override DB used by integration tests locally
# Example: mysql://root:password@127.0.0.1:3306/db_backend_api_jwt_test
DATABASE_URL_TEST=mysql://${DB_USER}:${DB_PASS}@${DB_HOST}:3306/db_backend_api_jwt_test

# Connection pool size for the application (adjust for your DB & instance size)
DB_POOL_SIZE=20

# Rate limiting (per IP)
RATE_LIMIT_RPS=100
RATE_LIMIT_BURST=200
# Optional: cost per request (float, default 1.0). Use <1.0 to allow more effective capacity per key (useful under NAT/CF aggregation in tests)
# Example: RATE_LIMIT_REQUEST_COST=0.2
RATE_LIMIT_REQUEST_COST=1.0

# Comma-separated CIDR list of trusted proxies (e.g. Cloudflare IP ranges)
# Example to trust all local proxies during tests: 0.0.0.0/0
TRUSTED_PROXIES=

# Example usage
# 1. Copy this file to .env and edit values:
#    cp .env.example .env
# 2. Create DB and run migrations if needed:
#    mysql -u ${DB_USER} -p -e "CREATE DATABASE IF NOT EXISTS db_backend_api_jwt;"
# 3. Run the server:
#    cargo run

# Notes:
# - Keep secrets (DB passwords, JWT_SECRET) out of git and use secret managers for production.
# - Use .env.test or CI secrets for running integration tests in CI.
